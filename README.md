# 東京メトロ沿線ホテル検索 (Tokyo Metro Line Hotel Search)

## 公共交通オープンデータチャレンジ2025 エントリー作品

### 概要

**「その格安ホテル、交通費と移動時間を含めても本当にお得ですか？」**

本サービスは、単なる「駅近」や「宿泊費の安さ」だけでなく、**目的地までの交通費・移動時間を含めた「トータルコスト（実質価格）」と「タイパ（時間対効果）」**でホテルを検索できるWebアプリケーションです。

東京メトロ全路線に対応し、実際の運賃・時刻表データに基づいた精度の高い比較を提供します。

### 開発の背景・きっかけ

開発のきっかけは、私自身が大の音楽好きで、頻繁にライブやコンサートに参加する中での実体験にあります。

人気アーティストのライブや大規模イベントの際、会場周辺のホテルはすぐに予約で埋まってしまったり、価格が高騰してしまうことが常態化しています。「会場周辺」で探すと見つからない、しかし「少し離れても電車一本で行ける場所」なら空いているかもしれない——そう思っても、既存の多くの旅行予約サイトは「エリア（〇〇区、〇〇駅周辺）」単位での検索が主流で、「移動のしやすさ（沿線）」軸での横断的な検索が非常に困難でした。

そんな中、不動産・住宅情報サイトでは当たり前のように実装されている**「沿線・駅で探す」**という機能に強いヒントを得ました。「住む場所を沿線で探すように、泊まる場所も沿線で合理的・能率的に探せれば、選択肢は何倍にも広がるはずだ」という着想が、本サービスの原点です。

### なぜ「東京メトロ」なのか？

数ある鉄道路線の中で、本サービスが東京メトロを選定したのには明確な理由があります。

1. **イベント会場を網羅するエリア特性**:
    東京メトロ沿線には、**後楽園駅（東京ドーム）**や**渋谷駅（ライブハウス・ホール多数）**をはじめ、日本武道館や国立競技場など、主要なイベント会場の最寄り駅が集中しています。
2. **移動が苦にならない「ちょうどいい距離感」**:
    都心を網の目のように結ぶ地下鉄ネットワークは、会場から数駅離れるだけで、静かでリーズナブルな宿泊エリアに繋がっています。乗り換えなし、または少ない乗り換えで**「近すぎず、遠すぎない（移動が苦にならない）」**範囲に、豊富な宿泊の選択肢が存在するのが東京メトロ沿線の最大の魅力です。

### 課題解決とユースケース

#### ❌ 既存の課題

* **「会場周辺」の飽和**: イベント会場や主要観光地周辺は、早期に満室になるか高額になりがち。
* **検索の壁**: 「ここに行きやすい場所」を探すには、土地勘がないと路線図と予約サイトを行き来する必要があり、手間がかかる。

#### ✅ 本サービスによる解決

目的地（ライブ会場、オフィス、観光地）を指定するだけで、そこへアクセス可能な全路線の駅を対象にホテルを検索。**「移動時間」と「コスト」のバランス**を可視化することで、ユーザーに新たな選択肢を提示します。

#### 💡 具体的なユースケース

1. **ライブ・イベント遠征**: 武道館や東京ドーム周辺が満室でも、地下鉄で20分圏内の「穴場駅」のホテルを即座に発見。
2. **出張・ビジネス**: 訪問先のオフィスへ直行できる路線上で、予算内に収まるホテルを効率的に確保。
3. **観光・インバウンド**: 知名度は低いが浅草や渋谷へのアクセスが抜群に良いエリアを見つけ、賢く滞在。

### 公共交通の活性化と地域への寄与

本サービスは、単なるホテル検索にとどまらず、**公共交通網の価値再発見**と**地域活性化**を目指しています。

* **交通空白（Transit Deserts）の解消へのアプローチ**:
    観光ガイドには載らないような「マイナーな駅」や、宿泊地としての認知度が低いエリア（交通空白地帯）であっても、「実は目的地まで乗り換えなしで15分」という**アクセスの価値**を可視化することで、新たな人の流れと宿泊需要を創出します。
* **利用者と事業者のWin-Winな経済循環**:
    遠くの安いホテルを選択することで、大幅に浮いた宿泊費の一部が交通費に転用されます。これにより、利用者はトータルコストを安く抑えることができ、鉄道事業者は運賃収入が増加します。**宿泊費の節約分が公共交通機関への収益として適正に還元される**この仕組みは、利用者と事業者の双方が得をする持続可能なモデルです。
* **公共交通の利用促進**:
    正確な「終電・始発」や「運賃」を提示することで、タクシーやレンタカーではなく、環境負荷の低い公共交通機関（東京メトロ）を利用した移動を後押しします。
* **オーバーツーリズムの緩和**:
    一極集中しがちな宿泊需要を沿線全体に分散させることで、混雑緩和と沿線地域の経済活性化に寄与します。

### 今後の展望

今回は、ライブ・イベント参加やビジネス出張といった「都心部へのアクセス」を主軸としたユースケースで構築しましたが、この「沿線・駅単位での横断的検索」モデルは、**地方の観光・地域活性化**においても極めて有効であると考えています。

* **観光地周辺のオーバーツーリズム解消への応用**:
    京都や鎌倉などの人気観光地において、中心部のホテル不足・高騰は深刻な課題です。本サービスのような仕組みを用いれば、観光地から「電車で1本、20分離れた場所」にある、空いていて快適なホテルをユーザーに提案できます。
* **「隠れた名所」と宿泊のセット提案**:
    主要観光地へのアクセスが良いにも関わらず、認知されていない「穴場エリア」への宿泊を促すことで、その地域周辺の飲食店や商店街への経済効果（地域活性化）も期待できます。

都市部のイベント需要だけでなく、地方観光における「移動と宿泊の最適化」による地域課題解決モデルとして発展させていきたいと考えています。

### 特徴

* **実質価格（トータルコスト）での比較**
  * 宿泊費だけでなく、目的地までの往復電車運賃（IC利用/切符利用）を加算した合計金額で比較できます。
  * 「宿泊代は安いが遠くて交通費が高い」ホテルと、「少し高いが交通費が安い」ホテルの損得が一目で分かります。
* **タイパポイント（時間対効果）での比較**
  * 最寄り駅の最安ホテルを基準に、「お得額 ÷ (1 + 追加時間/10)」でタイパポイントを算出。
  * 「少し遠いけど大幅に安い」「近いけど少し高い」など、時間と金額のトレードオフを数値化して比較できます。
  * 詳細な計算式は [docs/cospa-calculation.md](docs/cospa-calculation.md) を参照。
* **所要時間フィルター**
  * 検索結果を移動時間（電車+徒歩）で絞り込み可能。5分〜90分（制限なし）まで調整できます。
* **移動情報の可視化**
  * **正確な移動時間**: 実際の列車時刻表データと、OSRMによる正確な徒歩ルート計算（直線距離ではありません）を組み合わせて算出。
  * **終電・始発チェック**: 宿泊日から逆算し、目的地からホテルへの終電時刻と、翌朝の始発時刻も自動表示します。
* **直感的なUI/UX**
  * **Neumorphism Design**: ソフトで触りたくなるような質感と、直感的な操作性を提供。
  * **レスポンシブ対応**: スマートフォン（モバイル）での利用にも最適化。

### 技術的な工夫・こだわり

* **多角的なデータ結合の実装**:
    ODPTが提供する「運賃」「時刻表」「駅情報」と、楽天トラベルの「宿泊施設情報」という異なる性質のビッグデータを、位置情報と駅マスタをキーに動的に結合。単純な距離検索ではなく、「移動コスト」という複合的な指標でのリアルタイムソートを実現しました。
* **リアルな「徒歩」へのこだわり**:
    駅からホテルまでの距離は、単純な直線距離ではなく OSRM (Open Source Routing Machine) を用いて実際の道路ネットワークに基づいた徒歩ルートを計算。これにより「直線距離では近いが、線路を渡れず実際は遠回りが必要」といったミスマッチを防ぎ、ユーザーに正直な情報を提供します。

### デザインコンセプトとUXへのこだわり

* **キーボード操作を極力排除したUI**:
    移動中やライブ会場などの外出先でも片手でストレスなく操作できるよう、キーボード入力を極力排除しました。日付選択や条件設定はタップ操作のみで完結し、「探す」ことのハードルを徹底的に下げるインタラクション設計を行っています。

### 使用データ・技術

本アプリケーションは以下のオープンデータおよびAPIを利用して開発されています。

#### 1. 公共交通オープンデータセンター (ODPT)

本アプリケーションは、公共交通オープンデータセンターのデータを利用しています。

* 使用データ:
  * `odpt:Railway` (路線情報)
  * `odpt:Station` (駅情報)
  * `odpt:RailwayFare` (運賃情報：IC/切符)
  * `odpt:TrainTimetable` (列車時刻表)
  * `odpt:StationTimetable` (駅時刻表)

#### 2. Rakuten WEB Service

* **Supported by Rakuten Developers**
* 楽天トラベル施設検索API (VacantHotelSearch) を使用して、ホテルの空室情報・価格・画像・レビュー情報を取得しています。

#### 3. OpenStreetMap / OSRM

* Map data © OpenStreetMap contributors
* Routing by OSRM (Open Source Routing Machine)
* 駅からホテルまでの正確な徒歩ルート計算に使用しています。

---

### 技術スタック

* **Frontend**: React 19, TypeScript
* **Build Tool**: Vite
* **Styling**: Tailwind CSS v4, Custom CSS (Neumorphism)
* **Graphics**: Three.js (@react-three/fiber, @react-three/drei)
* **Routing Logic**: GLSL (Shaders), Custom Algorithms for timetable parsing

### セットアップと実行方法

#### 前提条件

* Node.js (v18以上推奨)
* npm

#### インストール

```bash
npm install
```

#### 環境変数の設定

ルートディレクトリに `.env.local` ファイルを作成し、以下のキーを設定してください。

```env
# 公共交通オープンデータセンター (ODPT) のAPIキー
VITE_ODPT_API_KEY=your_odpt_api_key

# 楽天ウェブサービスのアプリID
VITE_RAKUTEN_APP_ID=your_rakuten_app_id
```

#### 開発サーバーの起動

```bash
npm run dev
```

### ライセンスについて

本ソフトウェアのソースコードは MIT License ですが、利用しているデータ（ODPT, Rakuten, OSM）にはそれぞれの利用規約が適用されます。データの二次利用や商用利用については、各提供元の規約をご確認ください。

---

### 公共交通データに関する重要なお知らせ

本アプリケーションが利用する公共交通データは、公共交通オープンデータセンターにおいて提供されるものです。

公共交通事業者により提供されたデータを元にしていますが、必ずしも正確・完全なものとは限りません。本アプリケーションの表示内容について、公共交通事業者への直接の問合せは行わないでください。

本アプリケーションに関するお問い合わせは、以下のメールアドレスにお願いします。

📧 **<shokoi0618@gmail.com>**
