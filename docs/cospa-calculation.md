# タイパポイント計算方法

## 計算式

```
            お得額（円）
タイパ ＝ ─────────────────
          1 ＋ 追加時間(分) ÷ 10
```

## グラフ（お得額 × 追加時間）

横軸：お得額（円）、縦軸：追加時間（分）
数値はタイパポイント

```
追加時間(分)
    │
 60 │  125   250   375   500   625   750   875  1000
    │  ───   ───   ───   ───   ───   ───   ───   ───
 50 │  143   286   429   571   714   857  1000  1143
    │
 40 │  167   333   500   667   833  1000  1167  1333
    │
 30 │  200   400   600   800  1000  1200  1400  1600
    │
 20 │  250   500   750  1000  1250  1500  1750  2000
    │
 10 │  333   667  1000  1333  1667  2000  2333  2667
    │
  0 │  500  1000  1500  2000  2500  3000  3500  4000
    └─────────────────────────────────────────────────
         500   1000  1500  2000  2500  3000  3500  4000
                        お得額（円）
```

### 等高線（同じタイパポイントのライン）

```
追加時間(分)
    │
 60 │                                          500pt
 50 │                                    ──────
 40 │                          500pt ────
 30 │                    ──────
 20 │          500pt ────
 10 │    ──────
  0 │ ─── 500pt
    └─────────────────────────────────────────────────
         500   1000  1500  2000  2500  3000  3500  4000
                        お得額（円）

凡例：
  500pt線：500円お得/0分 → 1000円お得/10分 → 1500円お得/20分 ...
  1000pt線：その上（1000円お得/0分 → 2000円お得/10分 ...）
```

### 見方

- **右上へ行くほど**：お得額が増え、時間も増える
- **右下へ行くほど**：お得額が増え、時間は減る（ベスト）
- **左上へ行くほど**：お得額が減り、時間が増える（ワースト）

## 計算例

| お得額 | 追加時間 | 分母 | タイパポイント |
|--------|----------|------|---------------|
| 1,000円 | 0分 | 1.0 | 1,000.00pt |
| 1,000円 | 5分 | 1.5 | 666.67pt |
| 1,000円 | 10分 | 2.0 | 500.00pt |
| 1,000円 | 15分 | 2.5 | 400.00pt |
| 1,000円 | 20分 | 3.0 | 333.33pt |
| 1,000円 | 30分 | 4.0 | 250.00pt |

## グラフ

```
タイパポイント（1,000円お得の場合）

1000 ┤████████████████████████████████ 0分
 750 ┤██████████████████████████       5分
 500 ┤████████████████████             10分
 400 ┤████████████████                 15分
 333 ┤█████████████                    20分
 250 ┤██████████                       30分
 200 ┤█████████                        40分
 167 ┤████████                         50分
 143 ┤███████                          60分
     └─────────────────────────────────
```

## 考え方

### 「10分」の意味

10分追加時間が増えるごとに、分母が1増えます。

- **0分追加**: 分母 = 1（そのまま）
- **10分追加**: 分母 = 2（2倍のお得が必要）
- **20分追加**: 分母 = 3（3倍のお得が必要）

### 具体例

**例1：500円お得、15分遠い場合**

```
タイパ = 500 ÷ (1 + 15÷10)
       = 500 ÷ 2.5
       = 200pt
```

**例2：同じ200ptを達成するには**

| 追加時間 | 必要なお得額 |
|----------|-------------|
| 0分 | 200円 |
| 10分 | 400円 |
| 20分 | 600円 |
| 30分 | 800円 |

### 判定基準

- **タイパ > 0**: お得（時間を犠牲にする価値あり）
- **タイパ = 0**: トントン
- **タイパ < 0**: 損（時間もかかるし高い）

## 3Dグラフ

![タイパポイント3Dグラフ](./cospa-3d-graph.png)

- X軸: お得額（円）
- Y軸: 追加時間（分）
- Z軸: タイパポイント

## ソート順

タイパモードでは、このタイパポイントが高い順にソートされます。

1. タイパポイントが高い = 時間を犠牲にする価値がある
2. 基準ホテル（最寄り駅の最安ホテル）と比較して計算
